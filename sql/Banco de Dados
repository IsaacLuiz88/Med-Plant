#Criaçãodo do BD


USE MedPlant;

CREATE TABLE USUARIOS (
	ID_USER INT NOT NULL AUTO_INCREMENT,
	CPF_USER INT NOT NULL UNIQUE,
	NOME_USER VARCHAR(50) NOT NULL,
	SOBRENOME_USER VARCHAR(50) NOT NULL,
	EMAIL_USER VARCHAR(50) NOT NULL,
	SENHA_USER VARCHAR(15) NOT NULL,
	DATA_NASCIMENTO_USER DATE,
	PERGUNTA_SECRETA_USER VARCHAR(200) NOT NULL,
	RESPOSTA_SECRETA_USER TEXT NOT NULL,
	PRIMARY KEY(ID_USER)
    
	);
    
CREATE TABLE USUARIO_TEM_SINTOMAS (
	ID_USER_SINT INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    CODIGO INT,
    FOREIGN KEY (CODIGO) REFERENCES USUARIOS(ID_USER),
    FOREIGN KEY (ID_USER_SINT) REFERENCES SINTOMAS(ID_SINT)
	) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE SINTOMAS (
	ID_SINT INT NOT NULL AUTO_INCREMENT,
	PALAVRA_CHAVE_SINT VARCHAR(30) NOT NULL,
	DESCRICAO_SINT TEXT NULL,
	PRIMARY KEY(ID_SINT)
	);
    
CREATE TABLE UTILIZACAO (
	ID_UTL INT NOT NULL AUTO_INCREMENT,
    FOREIGN KEY (ID_UTL) REFERENCES SINTOMAS(ID_SINT),
    FOREIGN KEY (MODO_PREPARO_ATUA) REFERENCES EVAR(ID_ERV),
    MODO_PREPARO_ATUA TEXT,
    PRIMARY KEY(ID_UTL)
	) ENGINE=InnoBD DEFAULT CHARSET=UTF8;

CREATE TABLE ERVAS (
	ID_ERV INT NOT NULL AUTO_INCREMENT,
	NOME_POPULAR_ERV VARCHAR(40) NOT NULL,
	NOME_CIENTIFICO VARCHAR(100) NULL,
	INDICACAO_USO_ERV VARCHAR(100) NOT NULL,
	PRIMARY KEY(ID_ERV)
	);

CREATE TABLE ERVAS_TEM_PROPRIEDADES (
	ID_ERV_PROP INT NOT NULL AUTO_INCREMENT,
    EFEITOS VARCHAR(200) NOT NULL,
    FOREIGN KEY (ID_ERV_PROP) REFERENCES ERVAS(ID_ERV),
    FOREIGN KEY (EFEITOS) REFERENCES PROPRIEDADES(ID_PROPR),
    PRIMARY KEY(ID_ERV_PROP)
	) ENGINE=InnoBD DEFAULT CHARSET=utf8; 

CREATE TABLE PROPRIEDADES (
	ID_PROPR INT NOT NULL AUTO_INCREMENT,
	DESCRICAO_PROPR TEXT NOT NULL,
	PRIMARY KEY(ID_PROPR)
	);

CREATE TABLE ERVAS_TEM_CONTRA_INDICACAO (
	ID_ERV_CONTRA_IND INT NOT NULL AUTO_INCREMENT,
    EFEITOS_COLATERAIS VARCHAR(200),
    FOREIGN KEY (ID_ERV_CONTRA_IND) REFERENCES ERVA(ID_ERVA),
    FOREIGN KEY (EFEITOS_COLATERAIS) REFERENCES CONTRA_INDICACAO(ID_CONTRA_INDIC),
    PRIMARY KEY(ID_ERV_CONTRA_IND)
	) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE CONTRA_INDICACAO (
	ID_CONTRA_INDIC INT NOT NULL AUTO_INCREMENT,
    DESCRICACAO_CONTRA_INDIC VARCHAR(200) NOT NULL,
    PRIMARY KEY(ID_CONTRA_INDIC)
    );
